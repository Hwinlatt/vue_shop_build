"use strict";(self["webpackChunkvue_shop"]=self["webpackChunkvue_shop"]||[]).push([[12],{12:function(t,e,s){s.r(e),s.d(e,{default:function(){return x}});var a=s(252),i=s(577),n=s(963);const r={class:"container"},o={class:"row justify-content-center"},l={class:"col-md-8"},d={key:0,class:"text-center"},c=(0,a._)("div",{class:"spinner-border",role:"status"},[(0,a._)("span",{class:"visually-hidden"},"Loading...")],-1),p=(0,a._)("span",{class:""},"Getting User Data",-1),u=[c,p],m={key:1,class:"card"},h={key:0,class:"m-1"},b=(0,a._)("div",{class:"card-header"},[(0,a._)("span",null,"Enter Email"),(0,a.Uk)(),(0,a._)("span",null,"Enter OTP Code")],-1),f={class:"card-body"},g={key:0},k=(0,a._)("label",{for:""},"Email Address",-1),D={class:"text-end"},O={key:0,class:"btn btn-primary mt-4",type:"button",disabled:""},_=(0,a._)("span",{class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},null,-1),v=["disabled"],w={key:1},y=(0,a._)("label",{for:""},"OtpCode",-1),q=["disabled"],C={key:0};function T(t,e,s,c,p,T){return(0,a.wg)(),(0,a.iD)("div",r,[(0,a._)("div",o,[(0,a._)("div",l,[p.isLoading?((0,a.wg)(),(0,a.iD)("div",d,u)):(0,a.kq)("",!0),p.isLoading?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("div",m,[2==p.state?((0,a.wg)(),(0,a.iD)("small",h,"Otp Code is sent to "+(0,i.zw)(p.formData.email),1)):(0,a.kq)("",!0),b,(0,a._)("div",f,[1==p.state?((0,a.wg)(),(0,a.iD)("div",g,[k,(0,a.wy)((0,a._)("input",{type:"email","onUpdate:modelValue":e[0]||(e[0]=t=>p.formData.email=t),placeholder:"...@gmail.com",class:"form-control"},null,512),[[n.nr,p.formData.email]]),(0,a._)("div",D,[p.otpRequesting?((0,a.wg)(),(0,a.iD)("button",O,[_,(0,a.Uk)(" Loading... ")])):((0,a.wg)(),(0,a.iD)("button",{key:1,onClick:e[1]||(e[1]=t=>T.requestOtp()),class:"btn btn-primary mt-4",disabled:p.formData.email.length<3},"Request Otp",8,v))])])):(0,a.kq)("",!0),2==p.state?((0,a.wg)(),(0,a.iD)("div",w,[y,(0,a.wy)((0,a._)("input",{type:"text",placeholder:"######","onUpdate:modelValue":e[2]||(e[2]=t=>p.formData.code=t),class:"form-control",autocomplete:"none",maxlength:"6"},null,512),[[n.nr,p.formData.code]]),(0,a._)("button",{onClick:e[3]||(e[3]=t=>T.requestOtp()),disabled:p.resentOtpTime>0,class:"btn btn-link mt-4"},[(0,a.Uk)("Resent Otp "),p.resentOtpTime>0?((0,a.wg)(),(0,a.iD)("span",C,(0,i.zw)(p.resentOtpTime),1)):(0,a.kq)("",!0)],8,q),(0,a._)("button",{class:"btn btn-primary mt-4 float-end",onClick:e[4]||(e[4]=t=>T.submitOtp())},"Submit ")])):(0,a.kq)("",!0)])]))])])])}var R=s(196),U=s(907),E={name:"OtpInputView",data(){return{formData:{email:"",code:""},state:1,isLoading:!0,resentOtpTime:10,otpRequesting:!1}},methods:{requestOtp(){this.otpRequesting=!0,R.ZP.post(this.api+"/req_otp_code",this.formData,this.authHeader).then((t=>{t.data.success&&(this.state=2,this.resentOtpCount(),this.otpRequesting=!1)})).catch((t=>this.otpRequesting=!1))},resentOtpCount(){this.resentOtpTime=15;let t=setInterval((()=>{this.resentOtpTime--,0==this.resentOtpTime&&clearInterval(t)}),1e3)},submitOtp(){R.ZP.post(this.api+"/otp/submit",this.formData,this.authHeader).then((t=>{if(t.data.success)this.$store.dispatch("getUserData"),this.$swal.fire("Success","Otp Code is right.","success"),this.$router.go(-1);else if(t.data.error){let e="";t.data.error.forEach((t=>{e+=t})),this.$swal.fire("Error",e,"error")}}))}},computed:{...(0,U.rn)(["userInfo","api"]),...(0,U.Se)(["authHeader"])},mounted(){setTimeout((()=>{this.formData.email=this.userInfo.email,this.isLoading=!1}),2e3)}},L=s(744);const I=(0,L.Z)(E,[["render",T]]);var x=I}}]);
//# sourceMappingURL=12.1b45a3c4.js.map